# Get required libraries
sudo apt-get install libboost-dev libboost-system-dev libboost-thread-dev libboost-filesystem-dev libfreetype6-dev libexpat1-dev libgtk2.0-dev

# Get git + svn support if needed
sudo apt-get install cmake git git-svn 

# Create development folder
mkdir ~/hpcc_git
cd ~/hpcc_git

# Get Sources
git clone https://github.com/hpcc-systems/GraphControl.git

# Get Firebreath library
git clone https://github.com/firebreath/FireBreath.git
cd FireBreath
git checkout firebreath-1.6
cd ..

# Get unrestricted (2.4) agg libraries
git svn clone https://agg.svn.sourceforge.net/svnroot/agg

# Get AT&T Graphviz libraries
wget http://www.graphviz.org/pub/graphviz/stable/SOURCES/graphviz-2.26.3.tar.gz
tar xf graphviz-2.26.3.tar.gz
rm graphviz-2.26.3.tar.gz
cd graphviz-2.26.3
./configure
# edit config.h and comment out the following lines:
#define ENABLE_LTDL 1
#define HAVE_EXPAT
#define HAVE_LIBZ
cd ..

# Create general build folder.
mkdir build
cd build

# Create build folder for FireBreath.
mkdir FireBreath
cd FireBreath

# Generate FireBreath make files and build.
cmake -DWITH_SYSTEM_BOOST=1 -DFB_RELEASE=1  ../../FireBreath
make
cd ..

# Create build folder for GraphControl.
mkdir GraphControl
cd GraphControl

# Generate GraphControl make files and build.
cmake -DGRAPHVIZSRC_DIR=../../graphviz-2.26.3/ -DAGGSRC_DIR=../../agg/ -DFIREBREATH_DIR=../../FireBreath/ -DFIREBREATH_BUILD_DIR=../FireBreath/ ../../GraphControl/
make
cd ../..

# To build directly into "/usr/lib/mozilla/plugins" add
# -DWITH_BUILD_TARGET_IN_PLUGINS_FOLDER=1 to the above cmake call

