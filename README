# Get required libraries
sudo apt-get install libboost-dev libboost-system-dev libboost-thread-dev libboost-filesystem-dev libfreetype6-dev libexpat1-dev libgtk2.0-dev

# Get git + svn support if needed
sudo apt-get install cmake git git-svn 

# Create development folder
mkdir ~/hpcc_git
cd ~/hpcc_git

# Get Sources
git clone https://github.com/hpcc-systems/GraphControl.git

# Get Firebreath library
git clone https://github.com/GordonSmith/FireBreath.git
cd FireBreath
git checkout X11_Support
cd ..

# Get unrestricted (2.4) agg libraries
git svn clone https://agg.svn.sourceforge.net/svnroot/agg

# Get AT&T Graphviz libraries
wget http://www.graphviz.org/pub/graphviz/stable/SOURCES/graphviz-2.26.3.tar.gz
tar xf graphviz-2.26.3.tar.gz
rm graphviz-2.26.3.tar.gz
cd graphviz-2.26.3
./configure
# edit config.h and comment out the following lines:
#define ENABLE_LTDL 1
#define HAVE_EXPAT
#define HAVE_LIBZ
cd ..

# Create general build folder.
mkdir build
cd build

# Create build folder for GraphControl.
mkdir GraphControl
cd GraphControl

# Create build folder for GraphControl libs.
mkdir libs
cd libs

# Generate libs make files and build.
cmake -DGRAPHVIZSRC_DIR=../../../graphviz-2.26.3/ -DAGGSRC_DIR=../../../agg/ ../../../GraphControl/libs
make
cd ..

# Generate GraphControl make files and build.
cmake -DWITH_SYSTEM_BOOST=1 -DFB_PROJECTS_DIR=../GraphControl  ../../FireBreath
make
cd ..

# For debugging Create symbolic link to plugin
# Linux:
 ln -s ~/git/build/GraphControl/bin/HPCCSystemsGraphViewControl/npHPCCSystemsGraphViewControl.so ~/.mozilla/plugins/npHPCCSystemsGraphViewControl.so
# OSX:
 ln -s ~/git/build/GraphControl/projects/HPCCSystemsGraphViewControl/HPCCSystemsGraphViewControl.plugin ~/Library/Internet\ Plug-Ins/HPCCSystemsGraphViewControl.plugin


